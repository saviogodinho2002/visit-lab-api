{
    "openapi": "3.0.0",
    "info": {
        "title": "Api Visit Lab",
        "contact": {
            "email": "saviogmoiagaia@gmail.com"
        },
        "version": "3.0.0"
    },
    "paths": {
        "/api/laboratory": {
            "get": {
                "tags": [
                    "Laboratorio"
                ],
                "summary": "Retorna os laboratorios. Usuario deve ser um professor ou administrador. Se for um professor, vai retornar apenas os laboratórios que ele é coordenador",
                "operationId": "a82644e91b86e1ec8506f6eb6f314be0",
                "responses": {
                    "200": {
                        "description": "Retorna os laboratórios"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/laboratory/": {
            "post": {
                "tags": [
                    "Laboratorio"
                ],
                "summary": "Cria um laboratório",
                "description": "Cria um laboratorio",
                "operationId": "824905a101e613f95160dc7cb337b425",
                "requestBody": {
                    "description": "Json informações necessárias",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "local"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "nome do laboratório",
                                        "type": "string"
                                    },
                                    "local": {
                                        "description": "Local com predio e sala do laboratorio",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Registro criado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Login não encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/laboratory/{laboratory}": {
            "get": {
                "tags": [
                    "Laboratorio"
                ],
                "summary": "Obtém um laboratorio pelo id",
                "operationId": "a8ca12bc0074b3edfe7c04b084f416bb",
                "parameters": [
                    {
                        "name": "laboratory",
                        "in": "path",
                        "description": "Id do laboratório",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pega um laboratorio"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Laboratorio"
                ],
                "summary": "Edita um laboratório",
                "description": "Atualiza um laboratorio",
                "operationId": "5978c024eab570fc6a336175f207ab69",
                "parameters": [
                    {
                        "name": "laboratory",
                        "in": "path",
                        "description": "Id do laboratório",
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "Json informações necessárias",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "local"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "nome do laboratório",
                                        "type": "string"
                                    },
                                    "local": {
                                        "description": "Local com predio e sala do laboratorio",
                                        "type": "string"
                                    },
                                    "login": {
                                        "description": "Login pra qual será criado uma solicitação para o usuário ser coordenador",
                                        "type": "number"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Registro atualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Login não encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Laboratorio"
                ],
                "summary": "Deleta um laboratorio pelo id",
                "operationId": "d01e45d27700dd4816fd34c9f21e992e",
                "parameters": [
                    {
                        "name": "laboratory",
                        "in": "path",
                        "description": "Id do laboratório",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Laboratorio deletado"
                    },
                    "400": {
                        "description": "Erro"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/pre-registration": {
            "get": {
                "tags": [
                    "Pre registro"
                ],
                "summary": "Retorna os pre registro feitos pelo usuario",
                "operationId": "04e21b7e6ed54cd70dd941ef7d3e1666",
                "responses": {
                    "200": {
                        "description": "Retorna os pre registro feitos pelo usuario"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/pre-registration/my": {
            "get": {
                "tags": [
                    "Pre registro"
                ],
                "summary": "Retorna o pre registro para o usuario",
                "operationId": "e7d1219dbd4211968156fbfe64eb3308",
                "responses": {
                    "200": {
                        "description": "Retorna o pre registro para o usuario"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/pre-registration/": {
            "post": {
                "tags": [
                    "Pre registro"
                ],
                "summary": "Cria um pré registro de usuário",
                "description": "Cria um pre registro para proximo login de um usuário",
                "operationId": "f4d1ab40b902f23480d4f60c5beed90b",
                "requestBody": {
                    "description": "Json informações necessárias",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "login",
                                    "role_id"
                                ],
                                "properties": {
                                    "login": {
                                        "description": "Login do usuario",
                                        "type": "string"
                                    },
                                    "role_id": {
                                        "description": "Role que será atribuída a um usuário",
                                        "type": "number"
                                    },
                                    "laboratory_id": {
                                        "description": "Laboratório que será atribuído do usuario",
                                        "type": "number"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Registro criado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Login não encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/pre-registration/{preRegistration}": {
            "patch": {
                "tags": [
                    "Pre registro"
                ],
                "summary": "Usuario aceita ou rejeita um cargo",
                "description": "Atualiza o status de um pre registro",
                "operationId": "44ceb9099bb999daaabd2a0d1f1f1eae",
                "parameters": [
                    {
                        "name": "preRegistration",
                        "in": "path",
                        "description": "id do preregistro",
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "Json informações necessárias",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "response"
                                ],
                                "properties": {
                                    "response": {
                                        "description": "Resposta do usuario",
                                        "type": "number"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Atualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "formulario invalido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/role": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "Retorna as roles do sistema",
                "operationId": "a7549b0bc1566cc8e2cb8358f139a2ee",
                "responses": {
                    "200": {
                        "description": "roles do sistema"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/login": {
            "post": {
                "tags": [
                    "Usuario"
                ],
                "summary": "Loga um  usuário.",
                "description": "Loga",
                "operationId": "7716aff3e5de668956e4c3802154391b",
                "requestBody": {
                    "description": "Json com login e senha do usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "login",
                                    "password"
                                ],
                                "properties": {
                                    "login": {
                                        "description": "Login do usuario",
                                        "type": "string"
                                    },
                                    "password": {
                                        "description": "Senha do usuario",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Logado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Formulário inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/user/me": {
            "get": {
                "tags": [
                    "Usuario"
                ],
                "summary": "Retorna o usuario corrente",
                "operationId": "23a655d8871ff4920d42e22aad9c27c0",
                "responses": {
                    "200": {
                        "description": "retorno usuario"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/user?login={login}": {
            "get": {
                "tags": [
                    "Usuario"
                ],
                "summary": "Obtém um user pelo login",
                "operationId": "4cd28658572d6e8121f6d9079a5591d4",
                "parameters": [
                    {
                        "name": "login",
                        "in": "path",
                        "description": "login do usuario",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Uma lista de responsaveis"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/visit": {
            "get": {
                "tags": [
                    "Visitas"
                ],
                "summary": "Retorna as visitas dos laboratorios",
                "operationId": "a5be5246a0de1b9823484ecff2bf189d",
                "responses": {
                    "200": {
                        "description": "Retorna as visitas dos laboratorios"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Visitas"
                ],
                "summary": "Cria uma visita.",
                "description": "Cria uma visita",
                "operationId": "dd0e97173da710be6a2586eabe8caa3a",
                "requestBody": {
                    "description": "Json com informações necessárias",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "visitor_name",
                                    "visitor_document"
                                ],
                                "properties": {
                                    "visitor_name": {
                                        "description": "Nome do visitante",
                                        "type": "string"
                                    },
                                    "visitor_document": {
                                        "description": "Identificação do visitante",
                                        "type": "string"
                                    },
                                    "laboratory_id": {
                                        "description": "id do laboratorio onde foi feita visita",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Criado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Formulário inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        },
        "/api/visit/{visit}": {
            "get": {
                "tags": [
                    "Visitas"
                ],
                "summary": "Obtém uma visita pelo id",
                "operationId": "37407286885515c01eac06e33f2cf488",
                "parameters": [
                    {
                        "name": "visit",
                        "in": "path",
                        "description": "Id da visita",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pega um laboratorio"
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Visitas"
                ],
                "summary": "Atualiza uma visita.",
                "description": "Atualiza uma visita, colocando a data e hora de saída",
                "operationId": "8bbc78342c21532e21dbe33a1f0a39b0",
                "parameters": [
                    {
                        "name": "visit",
                        "in": "path",
                        "description": "Id da visita",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Atualizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Formulário inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string"
                                        },
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerToken": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerToken": {
                "type": "http",
                "description": "Acess token obtido na autenticação",
                "name": "Authorization",
                "in": "header",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    }
}